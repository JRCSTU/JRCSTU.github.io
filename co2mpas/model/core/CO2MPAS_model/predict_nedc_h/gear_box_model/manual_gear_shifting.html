<!DOCTYPE html>
<html lang="en">
<head>
    <style type="text/css">
        svg.on {
            border: 4px solid #008CFF;
            animation: blink-animation 1s linear;
            -webkit-animation: blink-animation 1s linear;
        }

        .node.on g:first-of-type a:first-child path:first-child {
            stroke: #008CFF;
            stroke-width: 4;
            animation: blink-animation 1s linear;
            -webkit-animation: blink-animation 1s linear;
        }

        .node.on g:first-of-type a:first-child polygon:first-child {
            stroke: #008CFF;
            stroke-width: 4;
            animation: blink-animation 1s linear;
            -webkit-animation: blink-animation 1s linear;
        }

        @keyframes blink-animation {
            to {
                stroke-width: 0;
                border-width: 0;
            }
        }

        @-webkit-keyframes blink-animation {
            to {
                stroke-width: 0;
                border-width: 0;
            }
        }

        .controls {
            background: #343a40;
            width: 100%;
        }

        .controls button {
            font-size: 18px;
            border: none;
            outline: none;
            background-color: transparent;
            color: #BBBBBB;
            cursor: pointer;
            border-radius: 0.25rem;
        }

        .controls button:hover {
            background-color: #555;
        }

        body {
            height: 100vh;
            width: 100vw;
            margin: 0;
        }

        #iframe {
            flex-grow: 1;
        }

        #index {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .sh-ico {
            display: inline-block;
            width: 18px;
            height: 18px;
            margin-left: 8px;
            padding-top: 3px;
            vertical-align: middle;
            content: "";
            background: no-repeat center center;
            background-size: 100% 100%;
        }

        .sh-ico-compress {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg fill='none' height='24' stroke='%23BBBBBB' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3'/%3E%3C/svg%3E");
        }

        .sh-ico-expand {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg fill='none' height='24' stroke='%23BBBBBB' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3'/%3E%3C/svg%3E");
        }
    </style>
    <!-- Required Javascript -->
    
    
</head>
<body onload="_onload()">
<div id="index" style="display: none; height: 100%">
    <div class="controls">
        <button id="btnFullScreen" class="sh-ico sh-ico-expand"
                style="display: none"
                onclick="FullScreen()"
                title="Enter/Exit Full Screen">
        </button>
        <button id="btnBack" onclick="onBack(event)" title="Go back">
            &lt;
        </button>
        <button id="btnForward" onclick="onForward(event)" title="Go forward">
            &gt;
        </button>
    </div>
    <iframe id="iframe" allowfullscreen frameborder="0"></iframe>
</div>
<div id="content" style="background: white; display: none"> <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 6.0.2 (0)
 -->
<!-- Title: dmap Pages: 1 -->
<svg width="1802pt" height="727pt"
 viewBox="0.00 0.00 1802.00 727.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 723)">
<title>dmap</title>
<text text-anchor="middle" x="897" y="-7.8" font-family="Times,serif" font-size="14.00">dmap</text>
<!-- 86762 -->
<g id="0" class="node">
<title>86762</title>
<g id="a_0"><a xlink:title="&quot;Calculates the maximum engine speed [RPM] at 95% of the nominal power.&quot;">
<polygon fill="#eed867" stroke="#eed867" points="692,-635 492,-635 492,-599 692,-599 692,-635"/>
<g id="a_0_0"><a xlink:href="./manual_gear_shifting/calculate_engine_max_speed_95.html" xlink:title="&quot;Calculates the maximum engine speed [RPM] at 95% of the nominal power.&quot;">
<text text-anchor="start" x="502" y="-612.8" font-family="Times,serif" font-size="14.00">calculate_engine_max_speed_95</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86768 -->
<g id="6" class="node">
<title>86768</title>
<g id="a_6"><a xlink:title="&quot;Maximum engine speed [RPM] at 95% of the nominal power.&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1016,-563C1016,-563 798,-563 798,-563 792,-563 786,-557 786,-551 786,-551 786,-527 786,-527 786,-521 792,-515 798,-515 798,-515 1016,-515 1016,-515 1022,-515 1028,-521 1028,-527 1028,-527 1028,-551 1028,-551 1028,-557 1022,-563 1016,-563"/>
<text text-anchor="start" x="844.5" y="-545.8" font-family="Times,serif" font-size="14.00">engine_max_speed_95</text>
<polygon fill="none" stroke="black" points="794,-519 794,-540 880,-540 880,-519 794,-519"/>
<text text-anchor="start" x="797" y="-525.8" font-family="Times,serif" font-size="14.00">remote child 0</text>
<g id="a_6_1"><a xlink:href="./../gear_box_model.html?id=95" xlink:title="&quot;Maximum engine speed [RPM] at 95% of the nominal power.&quot;">
<polygon fill="none" stroke="black" points="880,-519 880,-540 1020,-540 1020,-519 880,-519"/>
<text text-anchor="start" x="883" y="-525.8" font-family="Times,serif" font-size="14.00">(engine_max_speed_95)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86762&#45;&gt;86768 -->
<g id="edge1" class="edge">
<title>86762&#45;&gt;86768</title>
<path fill="none" stroke="black" d="M692.36,-608C768.62,-608 860.5,-608 860.5,-608 860.5,-608 860.5,-573.13 860.5,-573.13"/>
<polygon fill="black" stroke="black" points="864,-573.13 860.5,-563.13 857,-573.13 864,-573.13"/>
</g>
<!-- 86763 -->
<g id="1" class="node">
<title>86763</title>
<g id="a_1"><a xlink:title="&quot;T1 map speed vector [RPM].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M204,-719C204,-719 12,-719 12,-719 6,-719 0,-713 0,-707 0,-707 0,-683 0,-683 0,-677 6,-671 12,-671 12,-671 204,-671 204,-671 210,-671 216,-677 216,-683 216,-683 216,-707 216,-707 216,-713 210,-719 204,-719"/>
<text text-anchor="start" x="62" y="-701.8" font-family="Times,serif" font-size="14.00">full_load_speeds</text>
<polygon fill="none" stroke="black" points="8,-675 8,-696 101,-696 101,-675 8,-675"/>
<text text-anchor="start" x="11" y="-681.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_1_2"><a xlink:href="./../gear_box_model.html?id=93" xlink:title="&quot;T1 map speed vector [RPM].&quot;">
<polygon fill="none" stroke="black" points="101,-675 101,-696 208,-696 208,-675 101,-675"/>
<text text-anchor="start" x="104" y="-681.8" font-family="Times,serif" font-size="14.00">(full_load_speeds)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86763&#45;&gt;86762 -->
<g id="edge2" class="edge">
<title>86763&#45;&gt;86762</title>
<path fill="none" stroke="black" d="M108,-670.7C108,-645.9 108,-611 108,-611 108,-611 481.71,-611 481.71,-611"/>
<polygon fill="black" stroke="black" points="481.71,-614.5 491.71,-611 481.71,-607.5 481.71,-614.5"/>
</g>
<!-- 86764 -->
<g id="2" class="node">
<title>86764</title>
<g id="a_2"><a xlink:title="&quot;Engine speed idle median and std [RPM].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M447.5,-719C447.5,-719 246.5,-719 246.5,-719 240.5,-719 234.5,-713 234.5,-707 234.5,-707 234.5,-683 234.5,-683 234.5,-677 240.5,-671 246.5,-671 246.5,-671 447.5,-671 447.5,-671 453.5,-671 459.5,-677 459.5,-683 459.5,-683 459.5,-707 459.5,-707 459.5,-713 453.5,-719 447.5,-719"/>
<text text-anchor="start" x="297" y="-701.8" font-family="Times,serif" font-size="14.00">idle_engine_speed</text>
<polygon fill="none" stroke="black" points="243,-675 243,-696 336,-696 336,-675 243,-675"/>
<text text-anchor="start" x="246" y="-681.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_2_3"><a xlink:href="./../gear_box_model.html?id=60" xlink:title="&quot;Engine speed idle median and std [RPM].&quot;">
<polygon fill="none" stroke="black" points="336,-675 336,-696 452,-696 452,-675 336,-675"/>
<text text-anchor="start" x="339" y="-681.8" font-family="Times,serif" font-size="14.00">(idle_engine_speed)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86764&#45;&gt;86762 -->
<g id="edge3" class="edge">
<title>86764&#45;&gt;86762</title>
<path fill="none" stroke="black" d="M451,-670.62C451,-649.74 451,-623 451,-623 451,-623 481.78,-623 481.78,-623"/>
<polygon fill="black" stroke="black" points="481.78,-626.5 491.78,-623 481.78,-619.5 481.78,-626.5"/>
</g>
<!-- 86769 -->
<g id="7" class="node">
<title>86769</title>
<g id="a_7"><a xlink:title="&quot;Calculates the maximum velocity from full load curve.&quot;">
<polygon fill="#eed867" stroke="#eed867" points="932,-479 792,-479 792,-443 932,-443 932,-479"/>
<g id="a_7_4"><a xlink:href="./manual_gear_shifting/define_msg_and_mvl.html" xlink:title="&quot;Calculates the maximum velocity from full load curve.&quot;">
<text text-anchor="start" x="802.5" y="-456.8" font-family="Times,serif" font-size="14.00">define_msg_and_mvl</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86764&#45;&gt;86769 -->
<g id="edge4" class="edge">
<title>86764&#45;&gt;86769</title>
<path fill="none" stroke="black" d="M442.5,-670.84C442.5,-611.05 442.5,-461 442.5,-461 442.5,-461 781.79,-461 781.79,-461"/>
<polygon fill="black" stroke="black" points="781.79,-464.5 791.79,-461 781.79,-457.5 781.79,-464.5"/>
</g>
<!-- 86775 -->
<g id="13" class="node">
<title>86775</title>
<g id="a_13"><a xlink:title="&quot;Returns a function to correct the gear predicted according to &#160;&#160;&#160;&#160;:func:`correct_gear_mvl`, :func:`correct_gear_full_load` and driveability &#160;&#160;&#160;&#160;rules.&quot;">
<polygon fill="#eed867" stroke="#eed867" points="1014,-317 906,-317 906,-281 1014,-281 1014,-317"/>
<g id="a_13_5"><a xlink:href="./manual_gear_shifting/correct_gear_v4.html" xlink:title="&quot;Returns a function to correct the gear predicted according to &#160;&#160;&#160;&#160;:func:`correct_gear_mvl`, :func:`correct_gear_full_load` and driveability &#160;&#160;&#160;&#160;rules.&quot;">
<text text-anchor="start" x="916" y="-294.8" font-family="Times,serif" font-size="14.00">correct_gear_v4</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86764&#45;&gt;86775 -->
<g id="edge5" class="edge">
<title>86764&#45;&gt;86775</title>
<path fill="none" stroke="black" d="M434,-670.56C434,-604.1 434,-425 434,-425 434,-425 919,-425 919,-425 919,-425 919,-327.05 919,-327.05"/>
<polygon fill="black" stroke="black" points="922.5,-327.05 919,-317.05 915.5,-327.05 922.5,-327.05"/>
</g>
<!-- 86765 -->
<g id="3" class="node">
<title>86765</title>
<g id="a_3"><a xlink:title="&quot;Maximum allowed engine speed [RPM].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M694.5,-719C694.5,-719 489.5,-719 489.5,-719 483.5,-719 477.5,-713 477.5,-707 477.5,-707 477.5,-683 477.5,-683 477.5,-677 483.5,-671 489.5,-671 489.5,-671 694.5,-671 694.5,-671 700.5,-671 706.5,-677 706.5,-683 706.5,-683 706.5,-707 706.5,-707 706.5,-713 700.5,-719 694.5,-719"/>
<text text-anchor="start" x="540" y="-701.8" font-family="Times,serif" font-size="14.00">engine_max_speed</text>
<polygon fill="none" stroke="black" points="486,-675 486,-696 579,-696 579,-675 486,-675"/>
<text text-anchor="start" x="489" y="-681.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_3_6"><a xlink:href="./../gear_box_model.html?id=91" xlink:title="&quot;Maximum allowed engine speed [RPM].&quot;">
<polygon fill="none" stroke="black" points="579,-675 579,-696 699,-696 699,-675 579,-675"/>
<text text-anchor="start" x="582" y="-681.8" font-family="Times,serif" font-size="14.00">(engine_max_speed)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86765&#45;&gt;86762 -->
<g id="edge6" class="edge">
<title>86765&#45;&gt;86762</title>
<path fill="none" stroke="black" d="M592,-670.75C592,-670.75 592,-645.29 592,-645.29"/>
<polygon fill="black" stroke="black" points="595.5,-645.29 592,-635.29 588.5,-645.29 595.5,-645.29"/>
</g>
<!-- 86766 -->
<g id="4" class="node">
<title>86766</title>
<g id="a_4"><a xlink:title="&quot;Vehicle full load curve.&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M923,-719C923,-719 737,-719 737,-719 731,-719 725,-713 725,-707 725,-707 725,-683 725,-683 725,-677 731,-671 737,-671 737,-671 923,-671 923,-671 929,-671 935,-677 935,-683 935,-683 935,-707 935,-707 935,-713 929,-719 923,-719"/>
<text text-anchor="start" x="787" y="-701.8" font-family="Times,serif" font-size="14.00">full_load_curve</text>
<polygon fill="none" stroke="black" points="733,-675 733,-696 826,-696 826,-675 733,-675"/>
<text text-anchor="start" x="736" y="-681.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_4_7"><a xlink:href="./../gear_box_model.html?id=58" xlink:title="&quot;Vehicle full load curve.&quot;">
<polygon fill="none" stroke="black" points="826,-675 826,-696 927,-696 927,-675 826,-675"/>
<text text-anchor="start" x="829" y="-681.8" font-family="Times,serif" font-size="14.00">(full_load_curve)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86766&#45;&gt;86762 -->
<g id="edge7" class="edge">
<title>86766&#45;&gt;86762</title>
<path fill="none" stroke="black" d="M734,-670.87C734,-650.97 734,-626 734,-626 734,-626 702.16,-626 702.16,-626"/>
<polygon fill="black" stroke="black" points="702.16,-622.5 692.16,-626 702.16,-629.5 702.16,-622.5"/>
</g>
<!-- 86766&#45;&gt;86769 -->
<g id="edge8" class="edge">
<title>86766&#45;&gt;86769</title>
<path fill="none" stroke="black" d="M779.17,-670.92C779.17,-612.88 779.17,-470 779.17,-470 779.17,-470 781.75,-470 781.75,-470"/>
<polygon fill="black" stroke="black" points="781.75,-473.5 791.75,-470 781.75,-466.5 781.75,-473.5"/>
</g>
<!-- 86766&#45;&gt;86775 -->
<g id="edge9" class="edge">
<title>86766&#45;&gt;86775</title>
<path fill="none" stroke="black" d="M772.33,-670.82C772.33,-584.85 772.33,-299 772.33,-299 772.33,-299 895.97,-299 895.97,-299"/>
<polygon fill="black" stroke="black" points="895.97,-302.5 905.97,-299 895.97,-295.5 895.97,-302.5"/>
</g>
<!-- 86767 -->
<g id="5" class="node">
<title>86767</title>
<g id="a_5"><a xlink:title="&quot;Engine nominal power [kW].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1173,-719C1173,-719 965,-719 965,-719 959,-719 953,-713 953,-707 953,-707 953,-683 953,-683 953,-677 959,-671 965,-671 965,-671 1173,-671 1173,-671 1179,-671 1185,-677 1185,-683 1185,-683 1185,-707 1185,-707 1185,-713 1179,-719 1173,-719"/>
<text text-anchor="start" x="1015" y="-701.8" font-family="Times,serif" font-size="14.00">engine_max_power</text>
<polygon fill="none" stroke="black" points="961,-675 961,-696 1054,-696 1054,-675 961,-675"/>
<text text-anchor="start" x="964" y="-681.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_5_8"><a xlink:href="./../gear_box_model.html?id=90" xlink:title="&quot;Engine nominal power [kW].&quot;">
<polygon fill="none" stroke="black" points="1054,-675 1054,-696 1177,-696 1177,-675 1054,-675"/>
<text text-anchor="start" x="1057" y="-681.8" font-family="Times,serif" font-size="14.00">(engine_max_power)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86767&#45;&gt;86762 -->
<g id="edge10" class="edge">
<title>86767&#45;&gt;86762</title>
<path fill="none" stroke="black" d="M990.5,-670.75C990.5,-647.85 990.5,-617 990.5,-617 990.5,-617 702.04,-617 702.04,-617"/>
<polygon fill="black" stroke="black" points="702.04,-613.5 692.04,-617 702.04,-620.5 702.04,-613.5"/>
</g>
<!-- 86768&#45;&gt;86769 -->
<g id="edge11" class="edge">
<title>86768&#45;&gt;86769</title>
<path fill="none" stroke="black" d="M862,-514.75C862,-514.75 862,-489.29 862,-489.29"/>
<polygon fill="black" stroke="black" points="865.5,-489.29 862,-479.29 858.5,-489.29 865.5,-489.29"/>
</g>
<!-- 86773 -->
<g id="11" class="node">
<title>86773</title>
<g id="a_11"><a xlink:title="&quot;A gear shifting model (cmv or gspv or dtgs).&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M726.5,-323C726.5,-323 437.5,-323 437.5,-323 431.5,-323 425.5,-317 425.5,-311 425.5,-311 425.5,-287 425.5,-287 425.5,-281 431.5,-275 437.5,-275 437.5,-275 726.5,-275 726.5,-275 732.5,-275 738.5,-281 738.5,-287 738.5,-287 738.5,-311 738.5,-311 738.5,-317 732.5,-323 726.5,-323"/>
<text text-anchor="start" x="567" y="-305.8" font-family="Times,serif" font-size="14.00">MGS</text>
<polygon fill="none" stroke="black" points="434,-279 434,-300 520,-300 520,-279 434,-279"/>
<text text-anchor="start" x="437" y="-285.8" font-family="Times,serif" font-size="14.00">remote child 0</text>
<polygon fill="none" stroke="black" points="520,-279 520,-300 731,-300 731,-279 520,-279"/>
<text text-anchor="start" x="523" y="-285.8" font-family="Times,serif" font-size="14.00">((&#39;MGS&#39;, &#39;gear_shifting_model_raw&#39;))</text>
</a>
</g>
</g>
<!-- 86769&#45;&gt;86773 -->
<g id="edge12" class="edge">
<title>86769&#45;&gt;86773</title>
<path fill="none" stroke="black" d="M791.87,-452C760.09,-452 729.5,-452 729.5,-452 729.5,-452 729.5,-333.24 729.5,-333.24"/>
<polygon fill="black" stroke="black" points="733,-333.24 729.5,-323.24 726,-333.24 733,-333.24"/>
</g>
<!-- 86774 -->
<g id="12" class="node">
<title>86774</title>
<g id="a_12"><a xlink:title="&quot;Matrix velocity limits (upper and lower bound) [km/h].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1068,-401C1068,-401 1038,-401 1038,-401 1032,-401 1026,-395 1026,-389 1026,-389 1026,-377 1026,-377 1026,-371 1032,-365 1038,-365 1038,-365 1068,-365 1068,-365 1074,-365 1080,-371 1080,-377 1080,-377 1080,-389 1080,-389 1080,-395 1074,-401 1068,-401"/>
<text text-anchor="start" x="1037.5" y="-378.8" font-family="Times,serif" font-size="14.00">MVL</text>
</a>
</g>
</g>
<!-- 86769&#45;&gt;86774 -->
<g id="edge13" class="edge">
<title>86769&#45;&gt;86774</title>
<path fill="none" stroke="black" d="M932.17,-450C980.86,-450 1037,-450 1037,-450 1037,-450 1037,-411.31 1037,-411.31"/>
<polygon fill="black" stroke="black" points="1040.5,-411.31 1037,-401.31 1033.5,-411.31 1040.5,-411.31"/>
</g>
<!-- 86770 -->
<g id="8" class="node">
<title>86770</title>
<g id="a_8"><a xlink:title="&quot;Cycle road loads [N, N/(km/h), N/(km/h)^2].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1218,-563C1218,-563 1058,-563 1058,-563 1052,-563 1046,-557 1046,-551 1046,-551 1046,-527 1046,-527 1046,-521 1052,-515 1058,-515 1058,-515 1218,-515 1218,-515 1224,-515 1230,-521 1230,-527 1230,-527 1230,-551 1230,-551 1230,-557 1224,-563 1218,-563"/>
<text text-anchor="start" x="1108" y="-545.8" font-family="Times,serif" font-size="14.00">road_loads</text>
<polygon fill="none" stroke="black" points="1054,-519 1054,-540 1147,-540 1147,-519 1054,-519"/>
<text text-anchor="start" x="1057" y="-525.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_8_9"><a xlink:href="./../gear_box_model.html?id=68" xlink:title="&quot;Cycle road loads [N, N/(km/h), N/(km/h)^2].&quot;">
<polygon fill="none" stroke="black" points="1147,-519 1147,-540 1222,-540 1222,-519 1147,-519"/>
<text text-anchor="start" x="1150" y="-525.8" font-family="Times,serif" font-size="14.00">(road_loads)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86770&#45;&gt;86769 -->
<g id="edge14" class="edge">
<title>86770&#45;&gt;86769</title>
<path fill="none" stroke="black" d="M1063,-514.83C1063,-495.29 1063,-471 1063,-471 1063,-471 942.02,-471 942.02,-471"/>
<polygon fill="black" stroke="black" points="942.02,-467.5 932.02,-471 942.02,-474.5 942.02,-467.5"/>
</g>
<!-- 86771 -->
<g id="9" class="node">
<title>86771</title>
<g id="a_9"><a xlink:title="&quot;Constant velocity speed ratios of the gear box [km/(h*RPM)].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1478,-563C1478,-563 1260,-563 1260,-563 1254,-563 1248,-557 1248,-551 1248,-551 1248,-527 1248,-527 1248,-521 1254,-515 1260,-515 1260,-515 1478,-515 1478,-515 1484,-515 1490,-521 1490,-527 1490,-527 1490,-551 1490,-551 1490,-557 1484,-563 1478,-563"/>
<text text-anchor="start" x="1310" y="-545.8" font-family="Times,serif" font-size="14.00">velocity_speed_ratios</text>
<polygon fill="none" stroke="black" points="1256,-519 1256,-540 1349,-540 1349,-519 1256,-519"/>
<text text-anchor="start" x="1259" y="-525.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_9_10"><a xlink:href="./../gear_box_model.html?id=71" xlink:title="&quot;Constant velocity speed ratios of the gear box [km/(h*RPM)].&quot;">
<polygon fill="none" stroke="black" points="1349,-519 1349,-540 1482,-540 1482,-519 1349,-519"/>
<text text-anchor="start" x="1352" y="-525.8" font-family="Times,serif" font-size="14.00">(velocity_speed_ratios)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86771&#45;&gt;86769 -->
<g id="edge15" class="edge">
<title>86771&#45;&gt;86769</title>
<path fill="none" stroke="black" d="M1264.75,-514.86C1264.75,-492.93 1264.75,-464 1264.75,-464 1264.75,-464 942.15,-464 942.15,-464"/>
<polygon fill="black" stroke="black" points="942.15,-460.5 932.15,-464 942.15,-467.5 942.15,-460.5"/>
</g>
<!-- 86771&#45;&gt;86775 -->
<g id="edge16" class="edge">
<title>86771&#45;&gt;86775</title>
<path fill="none" stroke="black" d="M1299.75,-514.71C1299.75,-453 1299.75,-295 1299.75,-295 1299.75,-295 1024.21,-295 1024.21,-295"/>
<polygon fill="black" stroke="black" points="1024.21,-291.5 1014.21,-295 1024.21,-298.5 1024.21,-291.5"/>
</g>
<!-- 86772 -->
<g id="10" class="node">
<title>86772</title>
<g id="a_10"><a xlink:title="&quot;Rated engine speed [RPM].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1782,-563C1782,-563 1520,-563 1520,-563 1514,-563 1508,-557 1508,-551 1508,-551 1508,-527 1508,-527 1508,-521 1514,-515 1520,-515 1520,-515 1782,-515 1782,-515 1788,-515 1794,-521 1794,-527 1794,-527 1794,-551 1794,-551 1794,-557 1788,-563 1782,-563"/>
<text text-anchor="start" x="1570" y="-545.8" font-family="Times,serif" font-size="14.00">engine_speed_at_max_power</text>
<polygon fill="none" stroke="black" points="1516,-519 1516,-540 1609,-540 1609,-519 1516,-519"/>
<text text-anchor="start" x="1519" y="-525.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_10_11"><a xlink:href="./../gear_box_model.html?id=92" xlink:title="&quot;Rated engine speed [RPM].&quot;">
<polygon fill="none" stroke="black" points="1609,-519 1609,-540 1786,-540 1786,-519 1609,-519"/>
<text text-anchor="start" x="1612" y="-525.8" font-family="Times,serif" font-size="14.00">(engine_speed_at_max_power)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86772&#45;&gt;86769 -->
<g id="edge17" class="edge">
<title>86772&#45;&gt;86769</title>
<path fill="none" stroke="black" d="M1515.83,-514.84C1515.83,-490.65 1515.83,-457 1515.83,-457 1515.83,-457 942.28,-457 942.28,-457"/>
<polygon fill="black" stroke="black" points="942.28,-453.5 932.28,-457 942.28,-460.5 942.28,-453.5"/>
</g>
<!-- 86772&#45;&gt;86775 -->
<g id="edge18" class="edge">
<title>86772&#45;&gt;86775</title>
<path fill="none" stroke="black" d="M1523.67,-514.93C1523.67,-452.11 1523.67,-288 1523.67,-288 1523.67,-288 1024.05,-288 1024.05,-288"/>
<polygon fill="black" stroke="black" points="1024.05,-284.5 1014.05,-288 1024.05,-291.5 1024.05,-284.5"/>
</g>
<!-- 86778 -->
<g id="16" class="node">
<title>86778</title>
<g id="a_16"><a xlink:title="&quot;Predicts gears with a gear shifting model (mgs) [&#45;].&quot;">
<polygon fill="#eed867" stroke="#eed867" points="1228,-155 1048,-155 1048,-107 1228,-107 1228,-155"/>
<g id="a_16_12"><a xlink:href="./manual_gear_shifting/prediction_gears_gsm_v1.html" xlink:title="&quot;Predicts gears with a gear shifting model (mgs) [&#45;].&quot;">
<text text-anchor="start" x="1067.5" y="-137.8" font-family="Times,serif" font-size="14.00">prediction_gears_gsm_v1</text>
</a>
</g>
<polygon fill="none" stroke="black" points="1056,-111 1056,-132 1099,-132 1099,-111 1056,-111"/>
<text text-anchor="start" x="1059" y="-117.8" font-family="Times,serif" font-size="14.00">weight</text>
<polygon fill="none" stroke="black" points="1099,-111 1099,-132 1220,-132 1220,-111 1099,-111"/>
<text text-anchor="start" x="1102" y="-117.8" font-family="Times,serif" font-size="14.00">inf(inf=1, num=150)</text>
</a>
</g>
</g>
<!-- 86773&#45;&gt;86778 -->
<g id="edge19" class="edge">
<title>86773&#45;&gt;86778</title>
<path fill="none" stroke="black" d="M582,-274.9C582,-226.7 582,-123 582,-123 582,-123 1037.74,-123 1037.74,-123"/>
<polygon fill="black" stroke="black" points="1037.74,-126.5 1047.74,-123 1037.74,-119.5 1037.74,-126.5"/>
</g>
<!-- 86774&#45;&gt;86775 -->
<g id="edge20" class="edge">
<title>86774&#45;&gt;86775</title>
<path fill="none" stroke="black" d="M1053,-364.71C1053,-342.79 1053,-309 1053,-309 1053,-309 1024.1,-309 1024.1,-309"/>
<polygon fill="black" stroke="black" points="1024.1,-305.5 1014.1,-309 1024.1,-312.5 1024.1,-305.5"/>
</g>
<!-- 86777 -->
<g id="15" class="node">
<title>86777</title>
<g id="a_15"><a xlink:title="&quot;A function to correct the gear predicted.&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M938.5,-239C938.5,-239 777.5,-239 777.5,-239 771.5,-239 765.5,-233 765.5,-227 765.5,-227 765.5,-203 765.5,-203 765.5,-197 771.5,-191 777.5,-191 777.5,-191 938.5,-191 938.5,-191 944.5,-191 950.5,-197 950.5,-203 950.5,-203 950.5,-227 950.5,-227 950.5,-233 944.5,-239 938.5,-239"/>
<text text-anchor="start" x="824.5" y="-221.8" font-family="Times,serif" font-size="14.00">correct_gear</text>
<polygon fill="none" stroke="black" points="774,-195 774,-216 860,-216 860,-195 774,-195"/>
<text text-anchor="start" x="777" y="-201.8" font-family="Times,serif" font-size="14.00">remote child 0</text>
<g id="a_15_13"><a xlink:href="./../gear_box_model.html?id=52" xlink:title="&quot;A function to correct the gear predicted.&quot;">
<polygon fill="none" stroke="black" points="860,-195 860,-216 943,-216 943,-195 860,-195"/>
<text text-anchor="start" x="863" y="-201.8" font-family="Times,serif" font-size="14.00">(correct_gear)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86775&#45;&gt;86777 -->
<g id="edge21" class="edge">
<title>86775&#45;&gt;86777</title>
<path fill="none" stroke="black" d="M928.25,-280.77C928.25,-280.77 928.25,-249.25 928.25,-249.25"/>
<polygon fill="black" stroke="black" points="931.75,-249.25 928.25,-239.25 924.75,-249.25 931.75,-249.25"/>
</g>
<!-- 86776 -->
<g id="14" class="node">
<title>86776</title>
<g id="a_14"><a xlink:title="&quot;Cycle type (WLTP or NEDC).&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1269.5,-407C1269.5,-407 1110.5,-407 1110.5,-407 1104.5,-407 1098.5,-401 1098.5,-395 1098.5,-395 1098.5,-371 1098.5,-371 1098.5,-365 1104.5,-359 1110.5,-359 1110.5,-359 1269.5,-359 1269.5,-359 1275.5,-359 1281.5,-365 1281.5,-371 1281.5,-371 1281.5,-395 1281.5,-395 1281.5,-401 1275.5,-407 1269.5,-407"/>
<text text-anchor="start" x="1161" y="-389.8" font-family="Times,serif" font-size="14.00">cycle_type</text>
<polygon fill="none" stroke="black" points="1107,-363 1107,-384 1200,-384 1200,-363 1107,-363"/>
<text text-anchor="start" x="1110" y="-369.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_14_14"><a xlink:href="./../gear_box_model.html?id=81" xlink:title="&quot;Cycle type (WLTP or NEDC).&quot;">
<polygon fill="none" stroke="black" points="1200,-363 1200,-384 1274,-384 1274,-363 1200,-363"/>
<text text-anchor="start" x="1203" y="-369.8" font-family="Times,serif" font-size="14.00">(cycle_type)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86776&#45;&gt;86775 -->
<g id="edge22" class="edge">
<title>86776&#45;&gt;86775</title>
<path fill="none" stroke="black" d="M1111,-358.7C1111,-334.84 1111,-302 1111,-302 1111,-302 1024.09,-302 1024.09,-302"/>
<polygon fill="black" stroke="black" points="1024.09,-298.5 1014.09,-302 1024.09,-305.5 1024.09,-298.5"/>
</g>
<!-- 86777&#45;&gt;86778 -->
<g id="edge23" class="edge">
<title>86777&#45;&gt;86778</title>
<path fill="none" stroke="black" d="M858,-190.95C858,-168.69 858,-139 858,-139 858,-139 1037.86,-139 1037.86,-139"/>
<polygon fill="black" stroke="black" points="1037.87,-142.5 1047.86,-139 1037.86,-135.5 1037.87,-142.5"/>
</g>
<!-- 86783 -->
<g id="21" class="node">
<title>86783</title>
<g id="a_21"><a xlink:title="&quot;Predicted gears.&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1199,-71C1199,-71 1077,-71 1077,-71 1071,-71 1065,-65 1065,-59 1065,-59 1065,-35 1065,-35 1065,-29 1071,-23 1077,-23 1077,-23 1199,-23 1199,-23 1205,-23 1211,-29 1211,-35 1211,-35 1211,-59 1211,-59 1211,-65 1205,-71 1199,-71"/>
<text text-anchor="start" x="1123.5" y="-53.8" font-family="Times,serif" font-size="14.00">gears</text>
<polygon fill="none" stroke="black" points="1073,-27 1073,-48 1159,-48 1159,-27 1073,-27"/>
<text text-anchor="start" x="1076" y="-33.8" font-family="Times,serif" font-size="14.00">remote child 0</text>
<g id="a_21_15"><a xlink:href="./../gear_box_model.html?id=6" xlink:title="&quot;Predicted gears.&quot;">
<polygon fill="none" stroke="black" points="1159,-27 1159,-48 1203,-48 1203,-27 1159,-27"/>
<text text-anchor="start" x="1162" y="-33.8" font-family="Times,serif" font-size="14.00">(gears)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86778&#45;&gt;86783 -->
<g id="edge24" class="edge">
<title>86778&#45;&gt;86783</title>
<path fill="none" stroke="black" d="M1138,-106.7C1138,-106.7 1138,-81.24 1138,-81.24"/>
<polygon fill="black" stroke="black" points="1141.5,-81.24 1138,-71.24 1134.5,-81.24 1141.5,-81.24"/>
</g>
<!-- 86779 -->
<g id="17" class="node">
<title>86779</title>
<g id="a_17"><a xlink:title="&quot;Time vector [s].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1111.5,-239C1111.5,-239 980.5,-239 980.5,-239 974.5,-239 968.5,-233 968.5,-227 968.5,-227 968.5,-203 968.5,-203 968.5,-197 974.5,-191 980.5,-191 980.5,-191 1111.5,-191 1111.5,-191 1117.5,-191 1123.5,-197 1123.5,-203 1123.5,-203 1123.5,-227 1123.5,-227 1123.5,-233 1117.5,-239 1111.5,-239"/>
<text text-anchor="start" x="1031" y="-221.8" font-family="Times,serif" font-size="14.00">times</text>
<polygon fill="none" stroke="black" points="977,-195 977,-216 1070,-216 1070,-195 977,-195"/>
<text text-anchor="start" x="980" y="-201.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_17_16"><a xlink:href="./../gear_box_model.html?id=35" xlink:title="&quot;Time vector [s].&quot;">
<polygon fill="none" stroke="black" points="1070,-195 1070,-216 1116,-216 1116,-195 1070,-195"/>
<text text-anchor="start" x="1073" y="-201.8" font-family="Times,serif" font-size="14.00">(times)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86779&#45;&gt;86778 -->
<g id="edge25" class="edge">
<title>86779&#45;&gt;86778</title>
<path fill="none" stroke="black" d="M1085.75,-190.7C1085.75,-190.7 1085.75,-165.24 1085.75,-165.24"/>
<polygon fill="black" stroke="black" points="1089.25,-165.24 1085.75,-155.24 1082.25,-165.24 1089.25,-165.24"/>
</g>
<!-- 86780 -->
<g id="18" class="node">
<title>86780</title>
<g id="a_18"><a xlink:title="&quot;Vehicle velocity [km/h].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1306,-239C1306,-239 1154,-239 1154,-239 1148,-239 1142,-233 1142,-227 1142,-227 1142,-203 1142,-203 1142,-197 1148,-191 1154,-191 1154,-191 1306,-191 1306,-191 1312,-191 1318,-197 1318,-203 1318,-203 1318,-227 1318,-227 1318,-233 1312,-239 1306,-239"/>
<text text-anchor="start" x="1204" y="-221.8" font-family="Times,serif" font-size="14.00">velocities</text>
<polygon fill="none" stroke="black" points="1150,-195 1150,-216 1243,-216 1243,-195 1150,-195"/>
<text text-anchor="start" x="1153" y="-201.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_18_17"><a xlink:href="./../gear_box_model.html?id=70" xlink:title="&quot;Vehicle velocity [km/h].&quot;">
<polygon fill="none" stroke="black" points="1243,-195 1243,-216 1310,-216 1310,-195 1243,-195"/>
<text text-anchor="start" x="1246" y="-201.8" font-family="Times,serif" font-size="14.00">(velocities)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86780&#45;&gt;86778 -->
<g id="edge26" class="edge">
<title>86780&#45;&gt;86778</title>
<path fill="none" stroke="black" d="M1185,-190.7C1185,-190.7 1185,-165.24 1185,-165.24"/>
<polygon fill="black" stroke="black" points="1188.5,-165.24 1185,-155.24 1181.5,-165.24 1188.5,-165.24"/>
</g>
<!-- 86781 -->
<g id="19" class="node">
<title>86781</title>
<g id="a_19"><a xlink:title="&quot;Vehicle acceleration [m/s2].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1519.5,-239C1519.5,-239 1348.5,-239 1348.5,-239 1342.5,-239 1336.5,-233 1336.5,-227 1336.5,-227 1336.5,-203 1336.5,-203 1336.5,-197 1342.5,-191 1348.5,-191 1348.5,-191 1519.5,-191 1519.5,-191 1525.5,-191 1531.5,-197 1531.5,-203 1531.5,-203 1531.5,-227 1531.5,-227 1531.5,-233 1525.5,-239 1519.5,-239"/>
<text text-anchor="start" x="1399" y="-221.8" font-family="Times,serif" font-size="14.00">accelerations</text>
<polygon fill="none" stroke="black" points="1345,-195 1345,-216 1438,-216 1438,-195 1345,-195"/>
<text text-anchor="start" x="1348" y="-201.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_19_18"><a xlink:href="./../gear_box_model.html?id=50" xlink:title="&quot;Vehicle acceleration [m/s2].&quot;">
<polygon fill="none" stroke="black" points="1438,-195 1438,-216 1524,-216 1524,-195 1438,-195"/>
<text text-anchor="start" x="1441" y="-201.8" font-family="Times,serif" font-size="14.00">(accelerations)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86781&#45;&gt;86778 -->
<g id="edge27" class="edge">
<title>86781&#45;&gt;86778</title>
<path fill="none" stroke="black" d="M1434,-190.95C1434,-168.69 1434,-139 1434,-139 1434,-139 1238.02,-139 1238.02,-139"/>
<polygon fill="black" stroke="black" points="1238.02,-135.5 1228.02,-139 1238.02,-142.5 1238.02,-135.5"/>
</g>
<!-- 86782 -->
<g id="20" class="node">
<title>86782</title>
<g id="a_20"><a xlink:title="&quot;Motive power [kW].&quot;">
<path fill="#73c4fa" stroke="#73c4fa" d="M1746.5,-239C1746.5,-239 1561.5,-239 1561.5,-239 1555.5,-239 1549.5,-233 1549.5,-227 1549.5,-227 1549.5,-203 1549.5,-203 1549.5,-197 1555.5,-191 1561.5,-191 1561.5,-191 1746.5,-191 1746.5,-191 1752.5,-191 1758.5,-197 1758.5,-203 1758.5,-203 1758.5,-227 1758.5,-227 1758.5,-233 1752.5,-239 1746.5,-239"/>
<text text-anchor="start" x="1612" y="-221.8" font-family="Times,serif" font-size="14.00">motive_powers</text>
<polygon fill="none" stroke="black" points="1558,-195 1558,-216 1651,-216 1651,-195 1558,-195"/>
<text text-anchor="start" x="1561" y="-201.8" font-family="Times,serif" font-size="14.00">remote parent 0</text>
<g id="a_20_19"><a xlink:href="./../gear_box_model.html?id=47" xlink:title="&quot;Motive power [kW].&quot;">
<polygon fill="none" stroke="black" points="1651,-195 1651,-216 1751,-216 1751,-195 1651,-195"/>
<text text-anchor="start" x="1654" y="-201.8" font-family="Times,serif" font-size="14.00">(motive_powers)</text>
</a>
</g>
</a>
</g>
</g>
<!-- 86782&#45;&gt;86778 -->
<g id="edge28" class="edge">
<title>86782&#45;&gt;86778</title>
<path fill="none" stroke="black" d="M1654,-190.83C1654,-163.57 1654,-123 1654,-123 1654,-123 1238.18,-123 1238.18,-123"/>
<polygon fill="black" stroke="black" points="1238.18,-119.5 1228.18,-123 1238.18,-126.5 1238.18,-119.5"/>
</g>
</g>
</svg>
</div>

<script>
    var id, hist = {i: -1, list: []}, isFull;

    function FullScreen() {
        var el = document.getElementById("btnFullScreen");
        if (isFull) {
            closeFullscreen();
            isFull = false;
            el.setAttribute('class', el.getAttribute('class').replace("sh-ico-compress", "sh-ico-expand"));
        } else {
            openFullscreen();
            isFull = true;
            el.setAttribute('class', el.getAttribute('class').replace("sh-ico-expand", "sh-ico-compress"));
        }
    }

    function getURLParam(name) {
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results == null) {
            return null;
        } else {
            return decodeURI(results[1]) || 0;
        }
    }

    function setURLParam(key, value) {
        let uri = window.location.href,
            re = new RegExp("([?&])" + key + "=.*?(&|$)", "i"),
            separator = uri.indexOf('?') !== -1 ? "&" : "?";
        if (uri.match(re)) {
            return uri.replace(re, '$1' + key + "=" + encodeURI(value) + '$2');
        } else {
            return uri + separator + key + "=" + encodeURI(value);
        }
    }

    function iframeLoad(e) {
        e.preventDefault();
        document.getElementById("iframe").contentWindow.postMessage({
            id: id,
            action: 'id'
        }, '*');
    }

    function onBack(e) {
        e.preventDefault();
        if (hist.i > 0) {
            hist.i--;
            setIframe(hist.list[hist.i])
        }
    }

    function onForward(e) {
        e.preventDefault();
        if (hist.i + 1 < hist.list.length) {
            hist.i++;
            setIframe(hist.list[hist.i])
        }
    }

    function setIframe(src) {
        document.getElementById("iframe").src = src
    }

    function closeFullscreen() {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.mozCancelFullScreen) { /* Firefox */
            document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
            document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) { /* IE/Edge */
            document.msExitFullscreen();
        }
    }

    function isFullscreenSupported() {
        let elem = document.body;
        return elem.requestFullscreen || elem.mozRequestFullScreen || elem.webkitRequestFullscreen || elem.msRequestFullscreen
    }

    function openFullscreen() {
        let elem = document.body;
        if (elem.requestFullscreen) {
            elem.requestFullscreen()
        } else if (elem.mozRequestFullScreen) { /* Firefox */
            elem.mozRequestFullScreen()
        } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
            elem.webkitRequestFullscreen()
        } else if (elem.msRequestFullscreen) { /* IE/Edge */
            elem.msRequestFullscreen()
        }
    }

    function _onload() {
        if (getURLParam("controls") === "true") {
            document.getElementById("iframe").onload = iframeLoad;
            document.getElementById("index").style.display = "flex";
            if (isFullscreenSupported())
                document.getElementById("btnFullScreen").style.display = "inline-block";
            id = Date.now();
            setIframe(setURLParam("controls", "false"));
            window.addEventListener('message', function (event) {
                if (event.data.id === id) {
                    if (event.data.action === 'url') {
                        let href = event.data.url;
                        if (hist.list[hist.i] !== href) {
                            hist.i++;
                            hist.list = hist.list.slice(0, hist.i);
                            hist.list.push(href);
                        }
                        if (hist.i > 0) {
                            document.getElementById("btnBack").style.opacity = "1"
                        } else {
                            document.getElementById("btnBack").style.opacity = "0.5"
                        }
                        if (hist.i + 1 < hist.list.length) {
                            document.getElementById("btnForward").style.opacity = "1"
                        } else {
                            document.getElementById("btnForward").style.opacity = "0.5"
                        }
                    }
                }
            });
        } else {
            refreshIntervalId = setInterval(sendUrl, 100);
            setTimeout(function () {
                clearInterval(refreshIntervalId)
            }, 30000);
            document.getElementById("content").style.display = "block";
            var el = document.getElementById(getURLParam("id") || 'graph0');
            if (el)
                if (el.getAttribute('class').indexOf('node') !== -1) {
                    var bound = el.getBoundingClientRect();
                    window.scrollTo((bound.left + bound.right) / 2 - document.body.offsetWidth / 2, (bound.top + bound.bottom) / 2 - document.body.offsetHeight / 2);
                    el.setAttribute('class', el.getAttribute('class') + " on");
                } else if (el.getAttribute('class').indexOf('graph') !== -1) {
                    el.parentNode.setAttribute('class', el.parentNode.getAttribute('class') + " on");
                }
        }
        let parser = new DOMParser();
        for (let e of document.getElementsByTagName('viz')) {
            let out, digraph = e.getAttribute('digraph'), options = {
                engine: e.getAttribute('engine') || 'dot',
                format: "svg"
            };
            try {
                out = parser.parseFromString(Viz(digraph, options), "image/svg+xml").documentElement;
            } catch (e) {
                out = document.createElement('div')
                out.setAttribute('class', 'viz error')
                out.innerHTML = e.message === undefined ? "An error occurred while processing the graph input." : e.message;
            }
            e.appendChild(out);
        }
    }

    function getParentOrigin() {
        try {
            return parent.window.origin || "null";
        } catch (exception) {
            return "null"
        }
    }

    function sendUrl() {
        if (parent_iframe_id !== null && window.location.href !== url) {
            url = window.location.href;
            parent.postMessage({
                id: parent_iframe_id,
                url: url,
                action: 'url'
            }, '*');
            clearInterval(refreshIntervalId);
        }
    }

    var parent_iframe_id = null, url = null, refreshIntervalId;
    window.addEventListener('message', function (event) {
        var origin = event.origin === 'file:' ? 'null' : (event.origin || 'null');
        if (origin === getParentOrigin())
            if (parent_iframe_id === null && event.data.action === 'id') {
                parent_iframe_id = event.data.id
            }
    });
</script>
</body>
</html>